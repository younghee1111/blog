input.addEventListener('keydown', function(e) { 
    const inputs = Array.from(document.querySelectorAll('.task-input'));
    let currentIndex = inputs.indexOf(this);
    if(currentIndex === -1){
        const row = this.closest('tr');
        currentIndex = row ? parseInt(row.dataset.index) : i;
    }

    // Ctrl + Backspace: 현재 행 삭제
    if(e.ctrlKey && e.key === 'Backspace'){
        e.preventDefault();
        if(schedules.length === 1) return;
        
        deletedHistory.push({
            index: currentIndex,
            data: JSON.parse(JSON.stringify(schedules[currentIndex]))
        });
        
        schedules.splice(currentIndex, 1);
        updateAllTimes();
        
        setTimeout(() => {
            const newInputs = document.querySelectorAll('.task-input');
            const focusIndex = Math.min(currentIndex, newInputs.length - 1);
            if(newInputs[focusIndex]) newInputs[focusIndex].focus();
        }, 50);
        return;
    }
});
