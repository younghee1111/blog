<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>20ì´ˆ ê°„ê²© í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
        #status { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <h1>ë°ìŠ¤í¬í†± í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</h1>
    <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì•Œë¦¼ ê¶Œí•œì„ ìš”ì²­í•˜ê³ , í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”.</p>
    <button onclick="startNotificationTest()">í…ŒìŠ¤íŠ¸ ì‹œì‘ (20ì´ˆë§ˆë‹¤ ì•Œë¦¼)</button>
    <div id="status"></div>

    <script>
        // ì•Œë¦¼ ê¶Œí•œì„ ìš”ì²­í•˜ê³  20ì´ˆ ê°„ê²©ìœ¼ë¡œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” í•¨ìˆ˜
        function startNotificationTest() {
            const statusDiv = document.getElementById('status');
            
            // 1. ë¸Œë¼ìš°ì €ê°€ ì•Œë¦¼ APIë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸
            if (!("Notification" in window)) {
                statusDiv.innerHTML = "âŒ **ì˜¤ë¥˜:** í˜„ì¬ ë¸Œë¼ìš°ì €ëŠ” ë°ìŠ¤í¬í†± ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                return;
            }

            // 2. ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
            Notification.requestPermission().then(permission => {
                
                if (permission === "granted") {
                    // ê¶Œí•œ í—ˆìš©
                    statusDiv.innerHTML = "âœ… **ì•Œë¦¼ ê¶Œí•œ í—ˆìš©ë¨.** 20ì´ˆë§ˆë‹¤ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤. ì°½ì„ ìµœì†Œí™”í•´ ë³´ì„¸ìš”.";
                    
                    // 20ì´ˆ(20000ms)ë§ˆë‹¤ ì•Œë¦¼ì„ ìƒì„±
                    const intervalId = setInterval(() => {
                        showNotification();
                    }, 20000); // 20000 ë°€ë¦¬ì´ˆ = 20ì´ˆ

                    // (ì„ íƒ ì‚¬í•­) í˜ì´ì§€ë¥¼ ë‹«ìœ¼ë©´ ì•Œë¦¼ ë°˜ë³µì„ ë©ˆì¶”ë„ë¡ ì„¤ì •
                    window.onbeforeunload = function() {
                        clearInterval(intervalId);
                    };

                } else if (permission === "denied") {
                    // ê¶Œí•œ ê±°ë¶€
                    statusDiv.innerHTML = "âŒ **ì•Œë¦¼ ê¶Œí•œ ê±°ë¶€ë¨.** ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì´ í˜ì´ì§€ì˜ ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.";
                } else {
                    // ê¶Œí•œ ë¬´ì‹œ (default)
                    statusDiv.innerHTML = "âš ï¸ **ì•Œë¦¼ ê¶Œí•œì´ í—ˆìš©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.** ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
                }
            });
        }

        // ì‹¤ì œ ì•Œë¦¼ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function showNotification() {
            // ì•Œë¦¼ ë©”ì‹œì§€ ì •ì˜
            const title = "ğŸ”” 20ì´ˆ ê°„ê²© í…ŒìŠ¤íŠ¸ ì•Œë¦¼";
            const options = {
                body: "ì•ŒëŒ ë©”ì‹œì§€(í‘¸ì‹œ)ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.", // ì•Œë¦¼ ë³¸ë¬¸
                icon: 'https://www.google.com/favicon.ico' // ì•Œë¦¼ì— í‘œì‹œí•  ì•„ì´ì½˜ (ì„ íƒ ì‚¬í•­)
            };

            // ìƒˆ ì•Œë¦¼ ìƒì„±
            const notification = new Notification(title, options);
            
            // (ì„ íƒ ì‚¬í•­) ì•Œë¦¼ í´ë¦­ ì‹œ ë™ì‘ ì •ì˜
            notification.onclick = function(event) {
                event.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                window.focus(); // ë¸Œë¼ìš°ì € ì°½ì„ í™œì„±í™”
                console.log('ì•Œë¦¼ì´ í´ë¦­ë˜ì—ˆìŠµë‹ˆë‹¤.');
                // ì•Œë¦¼ì„ ë„ìš´ íƒ­ìœ¼ë¡œ ì´ë™í•˜ê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ì— ì¶”ê°€ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            };

            // (ì„ íƒ ì‚¬í•­) ìƒì„± í›„ 5ì´ˆ ë’¤ ì•Œë¦¼ ìë™ ë‹«ê¸°
            setTimeout(() => {
                notification.close();
            }, 5000); 
        }
    </script>

</body>
</html>
