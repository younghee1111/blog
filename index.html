<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‚¬ìš©ì ì…ë ¥ í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ - ìˆ˜ì •ë¨</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        .input-group { margin-bottom: 20px; }
        /* input-groupì€ flex-displayê°€ ì•„ë‹ˆë¼ block-displayê°€ ë˜ë¯€ë¡œ, 
           ë‚´ë¶€ ìš”ì†Œë“¤ì„ ê°€ìš´ë° ì •ë ¬í•˜ê¸° ìœ„í•´ text-align: centerë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. */
        #test-area { text-align: center; } 
        input[type="text"] { padding: 10px; width: 300px; border: 1px solid #ccc; font-size: 16px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin-left: 10px; }
        #status { margin-top: 30px; font-weight: bold; color: #333; }
        .permission-btn { background-color: #4CAF50; color: white; border: none; }
        .send-btn { background-color: #008CBA; color: white; border: none; }
    </style>
</head>
<body>
    <h1>ì‚¬ìš©ì ì§€ì • í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</h1>
    <p>ë¨¼ì € ì•Œë¦¼ ê¶Œí•œì„ ìš”ì²­í•˜ê³ , í…ŒìŠ¤íŠ¸í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•œ í›„ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</p>

    <div id="permission-area">
        <button class="permission-btn" onclick="requestNotificationPermission()">â‘  ì•Œë¦¼ ê¶Œí•œ ìš”ì²­</button>
    </div>

    <div class="input-group" style="display: none;" id="test-area">
        <input type="text" id="notificationMessage" placeholder="ì—¬ê¸°ì— í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="ì°½ ìµœì†Œí™”í•´ë„ ì˜ ë³´ì´ì£ ?">
        <button class="send-btn" onclick="sendCustomNotification()">â‘¡ ì•Œë¦¼ ë„ìš°ê¸° (ì¦‰ì‹œ)</button>
    </div>
    
    <div id="status"></div>

    <script>
        let notificationPermission = Notification.permission;
        const statusDiv = document.getElementById('status');
        
        document.addEventListener('DOMContentLoaded', updateStatus); // DOMContentLoadedì—ì„œ updateStatus ì‹¤í–‰

        function requestNotificationPermission() {
            if (!("Notification" in window)) {
                statusDiv.innerHTML = "âŒ **ì˜¤ë¥˜:** í˜„ì¬ ë¸Œë¼ìš°ì €ëŠ” ë°ìŠ¤í¬í†± ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                return;
            }

            // ê¶Œí•œ ìš”ì²­
            Notification.requestPermission().then(permission => {
                notificationPermission = permission;
                updateStatus();
            });
        }

        function sendCustomNotification() {
            if (notificationPermission !== "granted") {
                statusDiv.innerHTML = "âŒ **ì˜¤ë¥˜:** ì•Œë¦¼ ê¶Œí•œì´ 'í—ˆìš©' ìƒíƒœê°€ ì•„ë‹™ë‹ˆë‹¤. ë¨¼ì € â‘ ë²ˆ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
                return;
            }

            const message = document.getElementById('notificationMessage').value;
            const title = "ğŸ”” ì‚¬ìš©ì ì§€ì • ì•Œë¦¼";
            
            if (!message) {
                 statusDiv.innerHTML = "âš ï¸ **ê²½ê³ :** ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
                return;
            }

            const options = {
                body: message, 
                icon: 'https://www.google.com/favicon.ico' 
            };

            const notification = new Notification(title, options);
            
            statusDiv.innerHTML = `âœ… **ì•Œë¦¼ ì„±ê³µ!** "${message}" ë©”ì‹œì§€ë¡œ ì•Œë¦¼ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ì°½ì„ ìµœì†Œí™”í•´ ë³´ì„¸ìš”.`;
            
            // 5ì´ˆ ë’¤ ì•Œë¦¼ ìë™ ë‹«ê¸° 
            setTimeout(() => {
                notification.close();
            }, 5000); 
        }

        function updateStatus() {
            const permissionArea = document.getElementById('permission-area');
            const testArea = document.getElementById('test-area');

            if (notificationPermission === "granted") {
                statusDiv.innerHTML = "âœ… **ì•Œë¦¼ ê¶Œí•œ í—ˆìš©ë¨.** ì´ì œ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê³  ì•Œë¦¼ì„ ë„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                permissionArea.style.display = 'none';
                testArea.style.display = 'block'; // ğŸ’¡ 'block'ìœ¼ë¡œ ìˆ˜ì •
            } else if (notificationPermission === "denied") {
                statusDiv.innerHTML = "âŒ **ì•Œë¦¼ ê¶Œí•œ ê±°ë¶€ë¨.** ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì´ í˜ì´ì§€ì˜ ì•Œë¦¼ ê¶Œí•œì„ 'í—ˆìš©'ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.";
                permissionArea.style.display = 'block';
                testArea.style.display = 'none';
            } else { // default or prompt
                statusDiv.innerHTML = "âš ï¸ **ì•Œë¦¼ ê¶Œí•œ ëŒ€ê¸° ì¤‘.** 'â‘  ì•Œë¦¼ ê¶Œí•œ ìš”ì²­' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
                permissionArea.style.display = 'block';
                testArea.style.display = 'none';
            }
        }
    </script>
</body>
</html>
